import{W as b,r as y,j as l,e as C}from"./app-fed2a0d1.js";import{M as N}from"./Modal-7d9c6350.js";import{I as n}from"./Input-e0a25325.js";import{B as c}from"./Button-f318903a.js";import{T as p}from"./Textarea-bc40bf29.js";import{I as w}from"./ImageUploader-f175f896.js";import{C as _}from"./CustomSelect-3af63ca2.js";import{A as S}from"./AudioUploader-bb2266a4.js";const M=({show:m,current:t,setFormOpen:i,categories:d})=>{const{data:r,setData:a,processing:u,errors:o,post:x}=b(),f=e=>{e.preventDefault();let s=t?route("podcast.update",t.id):route("podcast.store");x(s,{onSuccess:()=>{i(!1),a({})}})};y.useEffect(()=>{a(t||{})},[t]);const h=e=>{a(s=>({...s,image:e}))},g=e=>{console.log(e),a(s=>({...s,file:e.path,playable_file:e.playable_file}))},j=async e=>{try{const s=await C.post(route("podcast.remove"),{path:e});a(v=>({...v,file:null,playable_file:null,time:0}))}catch(s){console.log(s)}};return l.jsx(N,{show:m,onClose:()=>i(!0),children:l.jsxs("form",{onSubmit:f,className:"col-span-2 flex flex-col gap-3",children:[l.jsx(w,{handleUpload:h,data:r,setData:a,error:o.image}),!r.playable_file&&l.jsx(S,{handleUploadSuccess:g}),l.jsx("p",{className:"text-red-500 text-sm",children:o.file??""}),r.playable_file&&l.jsxs(l.Fragment,{children:[l.jsx("audio",{className:"w-full ",controls:!0,children:l.jsx("source",{src:r.playable_file,type:"audio/mp3"})}),l.jsx(c,{onClick:()=>j(r.file),className:"bg-red-600 w-[200px]",children:"Remove"})]}),l.jsx(n,{value:(r==null?void 0:r.title)??"",error:o.title,onChange:e=>a("title",e.target.value),label:"Title"}),l.jsx("p",{className:"font-medium",children:"Type"}),l.jsx("div",{className:"flex items-center gap-3",children:["free","paid"].map(e=>l.jsxs("div",{onClick:()=>a(s=>({...s,type:e})),className:`w-full cursor-pointer border transition-all text-center p-2 ${e===r.type?"border border-primary":""}`,children:[" ",e," "]},e))}),l.jsx("p",{className:"text-red-500 text-sm",children:o.type??""}),(r==null?void 0:r.type)==="paid"&&l.jsx(n,{value:(r==null?void 0:r.price)??"",error:o.price,onChange:e=>a("price",e.target.value),label:"Price"}),l.jsxs(_,{label:"Category",error:o.category_id,onChange:e=>a("category_id",e.target.value),children:[l.jsx("option",{value:"",children:"--- select ---"}),d.map(e=>l.jsx("option",{value:e.id,children:e.name},e.id))]}),l.jsx(p,{error:o.description,rows:4,value:(r==null?void 0:r.description)??"",label:"Description",onChange:e=>a("description",e.target.value)}),l.jsx(p,{error:o.author,rows:4,value:(r==null?void 0:r.author)??"",label:"author",onChange:e=>a("author",e.target.value)}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(c,{outline:!0,onClick:()=>i(!1),className:"w-full",children:"Cancel"}),l.jsx(c,{type:"submit",className:"w-full",loading:u,children:"Save"})]})]})})};export{M as default};
