import{j as e,W as v,r as y,a as C}from"./app-f4743089.js";import{M as N}from"./Modal-0d004a72.js";import{I as m}from"./Input-76a8ec44.js";import{B as p}from"./Button-5d0bd51e.js";import{T as d}from"./Textarea-f90a160a.js";import{I as _}from"./ImageUploader-1c0c6c0d.js";import{A as w}from"./AudioUploader-9fce9c08.js";const S=({message:t})=>e.jsx("span",{className:"text-rose-500",children:t}),k=({label:t,id:o,children:c,error:n,onChange:s,containerClass:r,className:u})=>e.jsxs("div",{className:`block ${r}`,children:[t&&e.jsx("span",{className:"block mb-2 text-md font-medium ",children:t}),e.jsx("select",{id:o,onChange:s,className:"block w-full h-full px-3 py-2.5 focus:ring-4 focus:ring-opacity-20 focus:ring-primary border-[.1px] border-primary rounded-sm  mt-1 text-sm form-select  "+u,children:c}),n&&e.jsx(S,{message:n})]}),M=({show:t,current:o,setFormOpen:c,categories:n})=>{const{data:s,setData:r,processing:u,errors:i,post:x}=v(),f=l=>{l.preventDefault();let a=o?route("audio.update",o.id):route("audio.store");x(a,{onSuccess:()=>{}})};y.useEffect(()=>{r(o||{})},[o]);const h=l=>{r(a=>({...a,image:l}))},g=l=>{r(a=>({...a,file:l.path,playable_file:l.playable_file})),r("file",l.path)},j=async l=>{try{const a=await C.post("api/audio/remove",{path:l});r(b=>({...b,file:null,playable_file:null,time:0}))}catch(a){console.log(a)}};return e.jsx(N,{show:t,onClose:()=>c(!0),children:e.jsxs("form",{onSubmit:f,className:"col-span-2 flex flex-col gap-3",children:[e.jsx(_,{handleUpload:h,data:s,setData:r,error:i.image}),!s.playable_file&&e.jsx(w,{handleUploadSuccess:g}),s.playable_file&&e.jsxs(e.Fragment,{children:[e.jsx("audio",{controls:!0,children:e.jsx("source",{src:s.playable_file,type:"audio/mp3"})}),e.jsx(p,{onClick:()=>j(s.file),className:"bg-red-600 w-[200px]",children:"Remove"})]}),e.jsx(m,{value:(s==null?void 0:s.title)??"",error:i.title,onChange:l=>r("title",l.target.value),label:"Title"}),e.jsx(m,{value:(s==null?void 0:s.price)??"",error:i.price,onChange:l=>r("price",l.target.value),label:"Price"}),e.jsxs(k,{error:i.category_id,onChange:l=>r("category_id",l.target.value),children:[e.jsx("option",{value:"",children:"--- select ---"}),n.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsx(d,{error:i.description,rows:4,value:(s==null?void 0:s.description)??"",label:"Description",onChange:l=>r("description",l.target.value)}),e.jsx(d,{error:i.author,rows:4,value:(s==null?void 0:s.author)??"",label:"author",onChange:l=>r("author",l.target.value)}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{outline:!0,onClick:()=>c(!1),className:"w-full",children:"Cancel"}),e.jsx(p,{type:"submit",className:"w-full",loading:u,children:"Save"})]})]})})};export{M as default};
